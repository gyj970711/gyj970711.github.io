(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0893922e"],{"012a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple-dark"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.userFn},model:{value:e.userParams.query,callback:function(t){e.$set(e.userParams,"query",t)},expression:"userParams.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.userFn},slot:"append"})],1)],1)]),r("el-col",{attrs:{span:4}},[r("div",{staticClass:"grid-content bg-purple-dark"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加用户")])],1)]),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{border:"",data:e.tableData,stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"72"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"180"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色",width:"180"}}),r("el-table-column",{attrs:{prop:"mg_state",label:"状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(r){return e.changeState(t.row.id,t.row.mg_state)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{prop:"mg_state",label:"状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{enterable:!1,content:"编辑",placement:"top"}},[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){e.dialogFormVisible1=!0}}})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogFormVisible1},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),r("el-tooltip",{attrs:{enterable:!1,content:"删除",placement:"top"}},[r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.open(t.row.id)}}})],1),r("el-tooltip",{attrs:{enterable:!1,content:"分配权限",placement:"top"}},[r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-star-off",circle:""}})],1)]}}])})],1),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.userParams.pagenum,"page-sizes":[1,2,5,10],"page-size":e.userParams.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},l=[],s=r("7c15"),o={data(){let e=(e,t,r)=>{let a=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)$/;if(!t)return r(new Error("Email 不能为空"));a.test(t)?r():r(new Error("请输入正确的Email"))},t=(e,t,r)=>{let a=/^1[3456789]\d{9}$/;if(!t)return r(new Error("手机号不能为空"));a.test(t)?r():r(new Error("请输入正确的手机号"))};return{totalNum:0,userParams:{query:"",pagenum:1,pagesize:5},tableData:[],dialogFormVisible:!1,dialogFormVisible1:!1,ruleForm:{username:"",password:"",email:"",mobile:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:6,message:"长度在 3 到 6 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到  18个字符",trigger:"blur"}],email:[{required:!0,message:"请输入正确的email",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入正确的手机号",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created(){},mounted(){this.userFn()},methods:{async userFn(){let{data:e}=await Object(s["f"])(this.userParams);this.tableData=e.data.users,this.totalNum=e.data.total},handleSizeChange(e){console.log(e),this.userParams.pagesize=e,this.userFn()},handleCurrentChange(e){console.log(e),this.userParams.pagenum=e,this.userFn()},async changeState(e,t){let{data:r}=await Object(s["b"])(e,t);200==r.meta.status&&this.$message({message:r.meta.msg,type:"success",duration:1e3})},async submitUserAdd(){let{data:e}=await Object(s["a"])(this.ruleForm);201==e.meta.status&&(this.$message({message:e.meta.msg,type:"success",duration:1e3}),this.dialogFormVisible=!1,this.userFn())},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;this.submitUserAdd()})},resetForm(e){this.$refs[e].resetFields()},async ajaxDelete(e){let{data:t}=await Object(s["c"])(e);console.log(t),200==t.meta.status&&(this.$message({message:t.meta.msg,type:"success",duration:1e3}),this.userFn())},open(e){this.$confirm("您确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.ajaxDelete(e),this.userFn()}).catch(()=>{})},async submitUpdateUser(e){let{data:t}=await Object(s["e"])(e);console.log(t),200==t.meta.status&&(this.$message({message:t.meta.msg,type:"success",duration:1e3}),this.dialogFormVisible1=!1,this.userFn())},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;this.submitUpdateUser()})}}},i=o,n=(r("2d6e"),r("2877")),u=Object(n["a"])(i,a,l,!1,null,"1325cc7e",null);t["default"]=u.exports},"2d6e":function(e,t,r){"use strict";var a=r("a4be"),l=r.n(a);l.a},a4be:function(e,t,r){}}]);
//# sourceMappingURL=chunk-0893922e.3bcffb8c.js.map