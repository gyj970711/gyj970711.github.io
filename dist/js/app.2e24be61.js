(function(t){function e(e){for(var s,o,i=e[0],l=e[1],c=e[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},r=[];function o(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"d0527ec1"}[t]+".js"}function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=n[t]=[e,s]}));e.push(a[2]=s);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=o(t);var c=new Error;r=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",c.name="ChunkLoadError",c.type=s,c.request=r,a[1](c)}n[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var p=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0268":function(t,e,a){},"034f":function(t,e,a){"use strict";var s=a("8589"),n=a.n(s);n.a},1112:function(t,e,a){},"35a1":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("a593"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],o=(a("034f"),a("9ca4")),i={},l=Object(o["a"])(i,n,r,!1,null,null,null),c=l.exports,u=a("4fb5"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home",style:{"margin-top":t.flag?"50px":"0"}},[a("app-header",{class:t.flag?"xi":""},[a("div",{attrs:{slot:"left"},slot:"left"},[t._v(" ele.me ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}],attrs:{slot:"title"},slot:"title"}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],attrs:{slot:"title"},on:{click:function(e){return t.toJump("goTop")}},slot:"title"},[t._v("置顶")]),a("div",{attrs:{slot:"right"},on:{click:function(e){return t.jump("/login")}},slot:"right"},[t._v("登录|注册")])]),t._m(0),a("div",{staticClass:"cityList"},t._l(t.list,(function(e,s){return a("div",{key:s},[a("span",{on:{click:function(a){return t.toJump(e)}}},[t._v(t._s(e))])])})),0),a("div",{staticClass:"top"},[a("span",[t._v(t._s(t.guess.name))]),a("i",{staticClass:"el-icon-arrow-right"})]),a("div",[a("p",{staticStyle:{margin:"8px 0"}},[t._v("热门城市")]),a("ul",{staticClass:"hot"},t._l(t.hot,(function(e,s){return a("li",{key:s,on:{click:function(a){return t.tiao(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]),a("div",t._l(t.list,(function(e,s){return a("div",{key:s},[a("p",{ref:e,refInFor:!0,attrs:{id:e}},[t._v(t._s(e))]),a("ul",{staticClass:"hot"},t._l(t.group[e],(function(e,s){return a("li",{key:s},[a("span",{on:{click:function(a){return t.tiao(e.id)}}},[t._v(t._s(e.name))])])})),0)])})),0)],1)},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top1"},[a("span",[t._v("当前定位城市：")]),a("span",{staticStyle:{"font-weight":"900"}},[t._v("定位不准时，请在城市列表中选择")])])}],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",[t._t("left",[a("i",{staticClass:"el-icon-arrow-left"})])],2),a("div",[t._t("title",[t._v(" 城市 ")])],2),a("div",[t._t("right",[a("i",{staticClass:"el-icon-setting"})])],2)])},f=[],v={data(){return{}},created(){},mounted(){},methods:{}},g=v,m=(a("9bd8"),Object(o["a"])(g,h,f,!1,null,"4bb59e4a",null)),_=m.exports,y=a("5976"),w=a.n(y);w.a.defaults.withCredentials=!0;const b=w.a.create({baseURL:"http://elm.cangdu.org",timeout:"5000"});b.interceptors.request.use(t=>(console.log(t),t)),b.interceptors.response.use(t=>(console.log(t),t));var x=b;function k(t,e){return x.get(t,{params:e})}function C(t,e){return x.post(t,e)}function $(t){return k("/v1/cities?type="+t)}var S={data(){return{guess:{},hot:[],group:{},list:[],flag:!1}},created(){},mounted(){this.ajaxGuess(),window.addEventListener("scroll",this.handleScrollx,!0)},components:{appHeader:_},methods:{async ajaxGuess(){let{data:t}=await $("guess");this.guess=t;let{data:e}=await $("hot");this.hot=e;let{data:a}=await $("group");console.log(a),this.group=a,this.list=Object.keys(a).sort(),console.log(a,e)},toJump(t){document.body.scrollTop=document.documentElement.scrollTop="goTop"!=t?this.$refs[t][0].offsetTop-50:0},handleScrollx(){console.log("滚动高度",window.pageYOffset),window.pageYOffset>50?this.flag=!0:this.flag=!1,console.log(this.flag)},jump(t,e){this.$router.push({path:t,query:{data:e}})},async tiao(t){console.log(t);let{data:e}=await this.$http.get("http://elm.cangdu.org/v1/cities/"+t);sessionStorage.setItem("city",JSON.stringify(e)),this.$router.push({path:"/city"})}}},j=S,O=(a("5a78"),Object(o["a"])(j,p,d,!1,null,"7dcb5c96",null)),E=O.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("app-header",[a("div",{attrs:{slot:"left"},slot:"left"},[a("i",{staticClass:"el-icon-arrow-left",on:{click:function(e){return t.$router.go(-1)}}})]),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("密码登录")]),a("div",{attrs:{slot:"right"},slot:"right"})]),a("div",{staticClass:"con"},[a("el-input",{attrs:{placeholder:"请输入号码"},on:{blur:t.choose},model:{value:t.arr.username,callback:function(e){t.$set(t.arr,"username",e)},expression:"arr.username"}}),a("el-input",{attrs:{placeholder:"请输入密码"},model:{value:t.arr.password,callback:function(e){t.$set(t.arr,"password",e)},expression:"arr.password"}}),a("div",{staticClass:"code"},[a("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.arr.captcha_code,callback:function(e){t.$set(t.arr,"captcha_code",e)},expression:"arr.captcha_code"}}),a("img",{attrs:{src:t.cap,alt:""}}),a("div",[a("span",[t._v("看不清")]),a("span",{staticStyle:{color:"#3190e8"},on:{click:t.ajaxCodeFn}},[t._v("换一张")])])],1),a("p",[t._v("温馨提示：未注册过的账号，登录时将自动注册")]),a("p",[t._v("注册过的用户可凭账号密码登录")]),a("van-button",{attrs:{type:"primary",size:"large",disabled:!t.can},on:{click:t.submit}},[t._v("登录")])],1)],1)},J=[];w.a.defaults.withCredentials=!0;var P={data(){return{cap:"",arr:{username:"",password:"",captcha_code:""},can:!1}},watch:{arr:{handler(t){""!=t.username&&""!=t.password&&""!=t.captcha_code?this.can=!0:this.can=!1},deep:!0}},created(){},mounted(){this.ajaxCodeFn()},methods:{setCookie(t,e,a){var s=new Date;s.setDate(s.getDate()+a),document.cookie=t+"="+e+"; expires="+s.toDateString()},async ajaxCodeFn(){let{data:t}=await w.a.post("http://elm.cangdu.org/v1/captchas");console.log(t),this.cap=t.code},async submit(){this.setCookie("cap",this.captcha_code,2),this.setCookie("SID",100,2);let{data:t}=await w.a.post("http://elm.cangdu.org/v2/login",{username:this.arr.username,password:this.arr.password,captcha_code:this.arr.captcha_code});"登录失败"!=t.message&&(sessionStorage.setItem("token",JSON.stringify(t.user_id)),console.log(t),this.$router.push("/home"))},choose(){if(!/^1[3456789]\d{9}$/.test(this.arr.username))return alert("手机号输入错误，请重新输入"),this.arr.username="",!1}},components:{appHeader:_}},T=P,I=(a("a008"),Object(o["a"])(T,N,J,!1,null,"5fc9af3c",null)),z=I.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("app-header",{staticStyle:{background:"rgba(14, 173, 247, 0.979)"}},[a("div",{attrs:{slot:"left"},slot:"left"},[a("i",{staticClass:"el-icon-arrow-left",on:{click:function(e){return t.$router.go(-1)}}})]),a("div",{staticStyle:{"font-size":"20px"},attrs:{slot:"title"},slot:"title"},[a("p",[t._v(t._s(t.city.name))])]),a("div",{attrs:{slot:"right"},on:{click:function(e){return t.$router.push("/home")}},slot:"right"},[t._v("切换城市")])]),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",placeholder:"输入校园、商务楼、地址"},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.all()},input:function(e){e.target.composing||(t.text=e.target.value)}}}),a("button",{on:{click:t.refer}},[t._v("提交")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{click:function(e){t.text=""}}},[t._v("❌")])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}]},[t._v("搜索历史")]),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}]},t._l(t.searchCity,(function(e,s){return a("li",{key:s,on:{click:function(a){return t.dian(e)}}},[a("p",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.address))])])})),0),a("ul",{directives:[{name:"show",rawName:"v-show",value:!t.flag&&0!=t.arr.length,expression:"!flag && arr.length!=0"}]},[t._l(t.arr,(function(e,s){return a("li",{key:s,on:{click:function(a){return t.dian(e)}}},[a("p",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.address))])])})),a("li",{staticClass:"del",on:{click:function(e){return t.del()}}},[a("p",[t._v("清空所有")])])],2)],1)},F=[],L={data(){return{city:JSON.parse(sessionStorage.getItem("city")),text:"",searchCity:[],show:!1,flag:!1,arr:JSON.parse(localStorage.getItem("arr"))||[]}},created(){},mounted(){},watch:{arr:{handler(t){localStorage.setItem("arr",JSON.stringify(t))},deep:!0}},methods:{refer(){this.flag=!0,this.$http.get(`http://elm.cangdu.org/v1/pois?type=search&city_id=${this.city.id}&keyword=${this.text}`).then(t=>{this.searchCity=t.data,console.log(this.searchCity)})},all(){this.flag=!0,this.$http.get(`http://elm.cangdu.org/v1/pois?type=search&city_id=${this.city.id}&keyword=${this.text}`).then(t=>{this.searchCity=t.data,console.log(this.searchCity)})},dian(t){this.arr.unshift(t),localStorage.setItem("arr",JSON.stringify(this.arr.slice(0,5))),this.$router.push("/goods")},del(){this.arr=[]}},components:{appHeader:_}},G=L,H=(a("ee4b"),Object(o["a"])(G,D,F,!1,null,"4aa9d41c",null)),M=H.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-sticky",[a("div",[a("router-link",{attrs:{to:"/home"}},[t._v("〈")]),a("h2",[t._v("我的")])],1)]),a("div",{staticClass:"user"},[a("img",{attrs:{src:"//elm.cangdu.org/img/default.jpg",alt:""}}),a("div",[a("p"),a("span",[a("van-icon",{attrs:{size:"20",name:"graphic"}}),t._v("暂无绑定手机号")],1)]),a("p")]),a("ul",{staticClass:"message"},[t._m(0),a("li",[a("p",[a("span",{staticStyle:{color:"#ff5f3e"}},[t._v(t._s(t.user.gift_amount))])]),a("span",[t._v("我的优惠")])]),t._m(1)]),a("img",{attrs:{src:"5bc7551845977d4fb18e9d91587af3d1.png",alt:""}}),a("ul",{staticClass:"footer"},t._l(t.foot,(function(e){return a("li",{key:e.id,class:e.flag?"active":"",on:{click:function(a){return t.dian(e.id)}}},[a("van-icon",{attrs:{size:"26",name:e.type}}),a("span",[t._v(t._s(e.text))])],1)})),0)],1)},U=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("p",[a("span",{staticStyle:{color:"#f90"}},[t._v("0.00")]),t._v("元")]),a("span",[t._v("我的余额")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("p",[a("span",{staticStyle:{color:"#6ac20b"}},[t._v("0")]),t._v("分")]),a("span",[t._v("我的积分")])])}],A={data(){return{foot:[{text:"外卖",type:"phone-o",id:0,flag:!1},{text:"搜索",type:"eye-o",id:1,flag:!1},{text:"订单",type:"orders-o",id:2,flag:!1},{text:"我的",type:"manager",id:3,flag:!0}],user:{},id:sessionStorage.getItem("token")}},created(){},mounted(){this.getUser()},methods:{dian(t){this.foot[t].flag=!0,this.foot.forEach(e=>{e.id!=t&&(e.flag=!1)}),0==t&&this.$router.push("/goods")},async getUser(){let{data:t}=await this.$http.get("http://elm.cangdu.org/v1/user?user_id="+this.id);this.user=t,console.log(this.user)}}},Y=A,R=(a("bf12"),Object(o["a"])(Y,q,U,!1,null,"6a9fe40c",null)),B=R.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-sticky",[a("div",[a("van-icon",{attrs:{name:"search"}}),a("p",[t._v(t._s(t.site))]),a("van-icon",{attrs:{name:"contact"},on:{click:t.jump}})],1)]),a("div",{staticClass:"center"},[a("van-swipe",{on:{change:t.onChange}},[a("van-swipe-item",[a("ul",t._l(t.nav,(function(e,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:s<8,expression:"index < 8"}],key:s},[a("img",{attrs:{src:"https://fuss10.elemecdn.com"+e.image_url,alt:""}}),a("p",[t._v(t._s(e.title))])])})),0)]),a("van-swipe-item",[a("ul",t._l(t.nav,(function(e,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:s<8,expression:"index < 8"}],key:s},[a("img",{attrs:{src:"https://fuss10.elemecdn.com"+e.image_url,alt:""}}),a("p",[t._v(t._s(e.title))])])})),0)])],1)],1),a("div",{staticClass:"shop"},[a("p",[a("van-icon",{attrs:{size:"16",name:"shop-collect-o"}}),t._v("附近商家")],1),a("ul",t._l(t.shop,(function(e,s){return a("li",{key:s},[a("img",{attrs:{src:"http://elm.cangdu.org/img/"+e.image_path,alt:""}}),a("ol",[a("li",{staticClass:"li-top"},[a("div",[a("p",[t._v("品牌")]),a("h2",[t._v(t._s(e.name))])]),a("span",[t._v("保准票")])]),t._m(0,!0)])])})),0)]),a("ul",{staticClass:"footer"},t._l(t.foot,(function(e){return a("li",{key:e.id,class:e.flag?"active":"",on:{click:function(a){return t.dian(e.id)}}},[a("van-icon",{attrs:{size:"26",name:e.type}}),a("span",[t._v(t._s(e.text))])],1)})),0)],1)},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"li-center"},[a("img",{attrs:{src:"2c7ecd2126c7294ebfbc825b89217dfc.png",alt:""}})])}],V={data(){return{nav:[],site:"",shop:[],foot:[{text:"外卖",type:"phone-o",id:0,flag:!0},{text:"搜索",type:"eye-o",id:1,flag:!1},{text:"订单",type:"orders-o",id:2,flag:!1},{text:"外卖",type:"manager",id:3,flag:!1}]}},created(){},mounted(){this.getGoods()},methods:{jump(){this.$router.push("/user")},dian(t){this.foot[t].flag=!0,this.foot.forEach(e=>{e.id!=t&&(e.flag=!1)}),3==t&&this.$router.push("/user")},async getGoods(){let{data:t}=await this.$http.get("v2/pois/28.234108,113.009931");this.site=t.name;let{data:e}=await this.$http.get("http://elm.cangdu.org/v2/index_entry?geohash=30.242857,120.194128&group_type=1&flags[]=F");this.nav=e;let{data:a}=await this.$http.get("http://elm.cangdu.org/shopping/restaurants?latitude=28.234108&longitude=113.009931&offset=0&limit=20&extras[]=activities&keyword=&restaurant_category_id=&restaurant_category_ids[]=&order_by=&delivery_mode[]=");this.shop=a,console.log(this.shop)},onChange(t){}}},W=V,X=(a("7585"),Object(o["a"])(W,K,Q,!1,null,"7b04a386",null)),Z=X.exports;s["default"].use(u["a"]);const tt=[{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/",name:"home",component:E},{path:"/login",name:"login",component:z},{path:"/city",name:"city",component:M},{path:"/user",name:"user",component:B},{path:"/goods",name:"goods",component:Z},{path:"/:id",name:"Home",component:E}],et=new u["a"]({base:"",routes:tt});var at=et,st=a("9f3a");s["default"].use(st["a"]);var nt=new st["a"].Store({state:{},mutations:{},actions:{},modules:{}}),rt=(a("35a1"),a("b705")),ot=a.n(rt),it=(a("3880"),a("3264"));a("78fb");s["default"].prototype.$http=x,s["default"].prototype.$get=k,s["default"].prototype.$post=C,s["default"].use(ot.a),s["default"].use(it["a"]),s["default"].config.productionTip=!1,new s["default"]({router:at,store:nt,render:function(t){return t(c)}}).$mount("#app")},"5a78":function(t,e,a){"use strict";var s=a("b437"),n=a.n(s);n.a},"68a9":function(t,e,a){},"6e82":function(t,e,a){},7585:function(t,e,a){"use strict";var s=a("eda8"),n=a.n(s);n.a},8589:function(t,e,a){},"9bd8":function(t,e,a){"use strict";var s=a("0268"),n=a.n(s);n.a},a008:function(t,e,a){"use strict";var s=a("1112"),n=a.n(s);n.a},b437:function(t,e,a){},bf12:function(t,e,a){"use strict";var s=a("68a9"),n=a.n(s);n.a},eda8:function(t,e,a){},ee4b:function(t,e,a){"use strict";var s=a("6e82"),n=a.n(s);n.a}});
//# sourceMappingURL=app.2e24be61.js.map